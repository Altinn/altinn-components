import { Meta, Controls, Primary, Canvas } from "@storybook/addon-docs/blocks";
import * as LayoutStories from "./Layout.stories.tsx";
import * as HeaderStories from "../GlobalHeader/GlobalHeader.stories.tsx";
import * as FooterStories from "../Footer/Footer.stories.ts";

<Meta title="Layout" />

# Global Layout

The global layout is shared accross applications and provides a common `GlobalHeader` and `Footer`, as well as a container for a local `Menu`.

Use `Layout` by providing the `header` and `footer` props, and an optional `sidebar`. Layout must be wripped in an `RootProvider` to enable shared context across all components.
Provide the `RootProvider` with the current language of your application to make sure all internal texts of the Layout are set accordingly.
The Layout supports three languages: English (`en`), Norwegian Bokmål (`no`), and Norwegian Nynorsk (`nn`), where Norwegian Bokmål is the default

Add a `color` and a `theme` and include the content for your application as `children`.

```tsx
import { RootProvider, Layout } from '@altinn/components';

function App() {
  return (
    <RootProvider languageCode="nb">
      <Layout {...layoutProps} color={<Color>} theme={<Theme>}>
        { /* Your application here */ }
      </Layout>
    </RootProvider>
  );
}
```

## The Header

Use `header` to includes a header with global menu and search, as well as an account switcher when user is logged in.

<Canvas of={HeaderStories.CurrentAccount} />

Prior to login, the global menu should include a prominent link to signing in.
The AccountSelector should automatically transform to a login button if `currentAccount` is undefined.
In this state, clicking the button will trigger the `onLoginClick` function provided to the header.

<Canvas of={HeaderStories.Login} />

## The Footer

Use `footer` to includes an address and a list of helpful links.

<Canvas of={FooterStories.Default} />

## The Sidebar

Use `sidebar` to unclude an optional local menu. It can be hidden, or omitted completely. When omitted main content will span the full width of the page.

## Layout composition

While the preferred way of using layout is the `Layout` component itself, it is possible to build a layout using the underlying components.

```tsx
import { LayoutBase, GlobalHeader, LayoutBody, LayoutSidebar, Menu, LayoutContent, Footer } from "@altinn/altinn-components";

return (
  <LayoutBase>
    <GlobalHeader />
    <LayoutBody>
        <LayoutSidebar>
            <Menu />
        <LayoutContent>
            <!-- Your content -->
        </LayoutContent>
    </LayoutBody>
    <Footer />
  </LayoutBase>
);
```

## Preview

Layout with sidebar.

<Canvas of={LayoutStories.Preview} />

Layout with hidden sidebar.

<Canvas of={LayoutStories.HiddenSidebar} />
